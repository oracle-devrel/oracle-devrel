<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Working With Our Repositories | Oracle Developer Relations</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Working With Our Repositories" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Oracle Developer Relations team. Helping you to be awesome while doing cool stuff." />
<meta property="og:description" content="The Oracle Developer Relations team. Helping you to be awesome while doing cool stuff." />
<link rel="canonical" href="http://localhost:4000/working_with_our_repos" />
<meta property="og:url" content="http://localhost:4000/working_with_our_repos" />
<meta property="og:site_name" content="Oracle Developer Relations" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Working With Our Repositories" />
<script type="application/ld+json">
{"url":"http://localhost:4000/working_with_our_repos","headline":"Working With Our Repositories","@type":"WebPage","description":"The Oracle Developer Relations team. Helping you to be awesome while doing cool stuff.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Oracle Developer Relations" /></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Oracle Developer Relations</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/"><img src="assets/images/DevRel_Logo.png" alt="Oracle Developer Relations Logo" style="width: 30px; height: 30px;" /></a><a class="page-link" href="https://developer.oracle.com">Dev.O</a><a class="page-link" href="https://github.com/oracle-devrel">Repositories</a><a class="page-link" href="/about/">About</a><a class="page-link" href="/publishing">How to Publish</a><a class="page-link" href="/working_with_our_repos">Working With Our Repositories</a></div>
      </nav></div>
</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Working With Our Repositories</h1>
  </header>

  <div class="post-content">
    <p>We’ve gone to great lengths to make our repos easy to work with.  This page gives you the info needed to successfully (and easily) work with our repos.  Hopefully most of this is just common sense, but worth calling out.</p>

<div style="position: relative;">
  <a href="#toc-skipped" class="screen-reader-only">Skip table of contents</a>
</div>

<h1 class="no_toc" id="table-of-contents">Table of Contents</h1>

<ul id="markdown-toc">
  <li><a href="#submitting-code" id="markdown-toc-submitting-code">Submitting Code</a></li>
  <li><a href="#change-log-and-comment-format" id="markdown-toc-change-log-and-comment-format">Change Log and Comment Format</a></li>
  <li><a href="#branches" id="markdown-toc-branches">Branches</a></li>
  <li><a href="#automated-checks" id="markdown-toc-automated-checks">Automated Checks</a></li>
  <li><a href="#protected-files" id="markdown-toc-protected-files">Protected Files</a></li>
  <li><a href="#pre-approved-licenses" id="markdown-toc-pre-approved-licenses">Pre-Approved Licenses</a></li>
  <li><a href="#releases-and-tags" id="markdown-toc-releases-and-tags">Releases and Tags</a>    <ul>
      <li><a href="#auto-generated-release-files" id="markdown-toc-auto-generated-release-files">Auto-Generated Release Files</a>        <ul>
          <li><a href="#sample-scenario" id="markdown-toc-sample-scenario">Sample Scenario</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div id="toc-skipped"></div>

<h1 id="submitting-code">Submitting Code</h1>
<p>The <code class="language-plaintext highlighter-rouge">main</code> branch is protected and requires a pull request (PR) to merge code (pushing directly to <code class="language-plaintext highlighter-rouge">main</code> will fail).  A pull request to <code class="language-plaintext highlighter-rouge">main</code> requires at least one review before it can be merged.  There are a couple of ways to do this:</p>

<ul>
  <li>Fork the repo, push changes and then submit a PR</li>
  <li>Create a branch, push changes to the branch and then submit a PR</li>
</ul>

<p>Either of the above options will require you to receive at least one review (approving the PR) before your code can be merged.</p>

<h1 id="change-log-and-comment-format">Change Log and Comment Format</h1>
<p>We prefer to standardize on using <a href="https://www.conventionalcommits.org/en/v1.0.0/">ConventionalCommits</a> when generating change logs and creating comments on commits, PRs, etc.</p>

<h1 id="branches">Branches</h1>
<p>There are lots of branching strategies out there.  We don’t dictate how to use branches, but leave this up to the project/repo maintainer(s) to decide how to use branches.  Each maintainer is able to select a branching strategy that they’re most comfortable with.</p>

<h1 id="automated-checks">Automated Checks</h1>
<p>There are several checks which are setup by default.  These checks must successfully pass before a merge can be made.  Your repo will be setup to pass the checks.</p>

<p>Here’s what’s needed to pass:</p>

<ul>
  <li>
    <p>Make sure to only use pre-approved licenses</p>

    <p>You may use other licenses, however until the project (repo) has been approved to use a non-pre-approved license, you will not be able to merge the PR (that’s failing the license validation check).</p>
  </li>
  <li>
    <p>Include the proper copyright notice on the <strong>first line</strong></p>

    <p>Make sure that the following code is present: <code class="language-plaintext highlighter-rouge">Copyright (c) 2021 Oracle and/or its affiliates.</code>  It’s also ok to use something like <code class="language-plaintext highlighter-rouge">Copyright (c) 2000-2021 Oracle and/or its affiliates.</code> (a range of years, instead of a single year).  Both will pass just fine.  If this is missing, warnings will be raised and a comment made on the PR (notifying you of which file(s) is missing the copyright notice).</p>
  </li>
  <li>
    <p>Block changes to protected files (see below).</p>

    <p>There are several files/directories that should not be modified.  One Action checks to make sure that none of these files are modified in a PR… if so, it fails (and posts a comment to the PR stating why it failed).</p>
  </li>
</ul>

<h1 id="protected-files">Protected Files</h1>
<p>There are several files and/or directories that should not be modified (are prohibited from being modified):</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">.github</code></p>

    <p>The <code class="language-plaintext highlighter-rouge">.github</code> directory (and all of its contents) are by default blocked.  This is to maintain the integrity of the automated pipelines (dependent on GitHub Actions, which are defined in the <code class="language-plaintext highlighter-rouge">.github</code> directory).</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">repolinter.json</code></p>

    <p>This is used to define what Repolinter is examining.  It’s referenced by the automated pipeline, so is protected from modification.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">license_policy.yml</code></p>

    <p>Used by Scancode-Toolkit, for license validation.  It’s referenced by the automated pipeline, so is protected from modification.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">sonar-project.properties</code></p>

    <p>The config needed by SonarCloud integration.  It’s referenced by the automated pipeline, so is protected from modification.</p>
  </li>
</ul>

<h1 id="pre-approved-licenses">Pre-Approved Licenses</h1>
<p>Just like most companies, we pride ourselves in top-notch open-source.  One of the key areas is ensuring a license is used that aligns with the goal of the organization.  There are a plethora of different licenses out there… we’re not going to argue that one is better than the other, however we have selected some that best align with our goals.  Our repositories must align to using one (or more) of the pre-approved licenses.</p>

<p>Pre-approved licenses for publishing (new repos):</p>

<table>
  <thead>
    <tr>
      <th><a href="https://choosealicense.com/appendix/">License Name</a></th>
      <th><a href="https://spdx.org/licenses/">SPDX ID</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://choosealicense.com/licenses/upl-1.0/">Universal Permissive License (UPL) version 1.0</a></td>
      <td><code class="language-plaintext highlighter-rouge">UPL-1.0</code></td>
    </tr>
  </tbody>
</table>

<p>Pre-approved licenses for 3rd-party libraries/components:</p>

<table>
  <thead>
    <tr>
      <th><a href="https://choosealicense.com/appendix/">License Name</a></th>
      <th><a href="https://spdx.org/licenses/">SPDX ID</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://choosealicense.com/licenses/upl-1.0/">Universal Permissive License (UPL) version 1.0</a></td>
      <td><code class="language-plaintext highlighter-rouge">UPL-1.0</code></td>
    </tr>
    <tr>
      <td><a href="https://choosealicense.com/licenses/mit/">MIT License</a></td>
      <td><code class="language-plaintext highlighter-rouge">MIT</code></td>
    </tr>
    <tr>
      <td><a href="https://choosealicense.com/licenses/apache-2.0/">Apache License 2.0</a></td>
      <td><code class="language-plaintext highlighter-rouge">Apache-2.0</code></td>
    </tr>
  </tbody>
</table>

<h1 id="releases-and-tags">Releases and Tags</h1>
<p>Just like branches, we don’t dictate how tags will be used or how you manage your releases.  We do suggest using (and standardize on, though we don’t enforce it) using <a href="https://semver.org">Semantic Versioning</a> for your versioning strategy.</p>

<h2 id="auto-generated-release-files">Auto-Generated Release Files</h2>
<p>When it comes to releases, we provide the ability to auto-generate (and upload) assets to the release.  Each time a release is <em>published</em>, an Action is triggered which will read the <code class="language-plaintext highlighter-rouge">release_files.json</code> file in the root of the repo.  This JSON file can specify one or more ZIP files to create and/or upload file(s) to the release.</p>

<h3 id="sample-scenario">Sample Scenario</h3>
<p>A common scenario is where a Terraform stack is created and published.  The desire is that a user cloning/downloading the repo will likely use it with <a href="https://www.terraform.io">Terraform CLI</a> and/or <a href="https://docs.cloud.oracle.com/en-us/iaas/Content/API/Concepts/cloudshellintro.htm">OCI Cloud Shell</a>.  This requires modifying the <code class="language-plaintext highlighter-rouge">provider.tf</code> file (or whatever file your providers are defined in), creating a ZIP file and uploading the ZIP file to a release (this is the easiest way to distribute a stack for easy deployment).</p>

<p>Let’s pretend that we have the following directory/file structure:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── README.md
├── data_sources.tf
├── iam.tf
├── LICENSE
├── network.tf
├── ods.tf
├── orm
│   └── provider.tf
├── provider.tf
├── schema.yaml
├── services.tf
├── tags.tf
├── terraform.tfvars.template
└── variables.tf
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">./provider.tf</code> file is what is setup to be used by Terraform CL, while <code class="language-plaintext highlighter-rouge">./orm/provider.tf</code> is configured to be used by ORM.  Here’s how we might build a ZIP file and upload it to any given release in our repo (this is all configured in <code class="language-plaintext highlighter-rouge">release_files.json</code> in the root of the repo):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[
  {
    "action": "create_zip",
    "file_name": "my-tf-stack-latest.zip",
    "files": [
      {
        "src_pattern": "*.tf",
        "exclude": [
          "provider.tf"
        ]
      },
      {
        "src": "LICENSE"
      },
      {
        "src": "schema.yaml",
      },
      {
        "src": "orm/provider.tf",
        "dst": "provider.tf"
      }
    ]
  },
  {
    "action": "upload_file",
    "file_name": "my-tf-stack-latest.zip"
  }
]
</code></pre></div></div>

<p>There are two actions:</p>
<ol>
  <li>Create the ZIP file</li>
  <li>Upload the ZIP file (to a published release, which triggers the Action)</li>
</ol>

<p>For creating the ZIP file, several source files are included:</p>
<ul>
  <li>All <code class="language-plaintext highlighter-rouge">.tf</code> files (except <code class="language-plaintext highlighter-rouge">provider.tf</code> in the root, which is intended for Terraform CLI and wouldn’t work with ORM)</li>
  <li>The <code class="language-plaintext highlighter-rouge">LICENSE</code> and <code class="language-plaintext highlighter-rouge">schema.yaml</code> files</li>
  <li>An ORM-specific <code class="language-plaintext highlighter-rouge">provider.tf</code> file (in the <code class="language-plaintext highlighter-rouge">orm</code> subdirectory)</li>
</ul>

<p>There are a lot of other options available, so if you’re curious or looking for more functionality, check out the documentation at <a href="https://github.com/oracle-devrel/action-release-zip-maker">https://github.com/oracle-devrel/action-release-zip-maker</a>.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Oracle Developer Relations</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Oracle Developer Relations</li><li><a class="u-email" href="mailto:devrel_oss-ww@oracle.com">devrel_oss-ww@oracle.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><!-- <ul class="social-media-list"></ul> --><ul class="social-media-list"><li><a rel="me" href="https://github.com/oracle-devrel" title="oracle-devrel"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a href="https://oracledevrel-learn.slack.com" title="oracledevrel-learn"><img src="/assets/images/slack_logo.png" style="height: 37px; width: 37px;"/></a></li></ul></div>

      <div class="footer-col footer-col-3">
        <p>The Oracle Developer Relations team.  Helping you to be awesome  while doing cool stuff.</p>
      </div>
    </div>
    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p>Copyright (c) 2021 Oracle and/or its affiliates.</p>
    </div>
    
  </div>

</footer>
</body>

</html>
